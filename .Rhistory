quiz02 <- read.csv(file=the_file,head=TRUE,sep=",")
quiz02 <- read.csv(file=the_file, sheetIndex = 1, header = TRUE)
quiz02 <- read.xlsx(file=the_file, sheetIndex = 1, header = TRUE)
head(quiz02)
colnames(quiz02)
colIndex <- 7:15
rowIndex <- 18:23
quiz02 <- read.xlsx(file=the_file, sheetIndex = 1, header=TRUE, colIndex=colIndex, rowIndex=rowIndex)
head(quiz02)
colnames(quiz02)
sum(quiz02$Zip*quiz02$Ext,na.rm=T)
install.packages("XML")
library(XML)
the_file <- "/Users/JerryTsai/userjst/individ/knowledg/cur/jhu.sph/ds03_getdata/quizzes/quiz01/getdata-data-restaurants.xml"
quiz03 <-xmlTreeParse(the_file, useInternal=TRUE)
rootNode <-xmlRoot(quiz03)
xmlName(rootNode)
colnames(quiz03)
rootNode[[1]]
xpathSApply(rootNode,"//zipcode",xmlValue)
sum(xpathSApply(rootNode,"//zipcode",xmlValue) == "21231")
library(data.table)
install.packages("data.table")
install.packages(c("bitops", "boot", "car", "class", "cluster", "corpcor", "digest", "e1071", "evaluate", "foreign", "formatR", "kernlab", "KernSmooth", "knitr", "lattice", "MASS", "mgcv", "mvtnorm", "nlme", "nnet", "PerformanceAnalytics", "quadprog", "Rcmdr", "RCurl", "rpart", "spatial", "survival", "tseries", "xts", "zoo"))
install.packages("devtools")
library(devtools)
find_rtools()
install.packages("KernSmooth")
library(KernSmoothR)
library(KernSmooth)
cube <- function(x, n) {
x^3
}
cube(3)
x <- 1:10
if(x > 5) {
x <- 0
}
f <- function(x) {
g <- function(y) {
y + z
}
z <- 4
x + g(x)
}
}
z <- 10
f(3)
x <- 5
y <- if(x < 3) {
NA
} else {
10
}
y
d <-3L
d
get_wd()
getwd()
install.packages("RMySQL")
library(RMySQL)
# Q01
ucscDb <- dBConnect(MySQL(), user="genome", host="genome-mysql.cse.ucsc.edu")
result <-dbGetQuery(ucscDb,"show databases;"); dbDisconnect(ucscDb);
ls(RMySQL)
ls("RMySQL")
library(RMySQL)
ls(RMySQL)
search()
ucscDb <- dbConnect(MySQL(), user="genome", host="genome-mysql.cse.ucsc.edu")
result <-dbGetQuery(ucscDb,"show databases;"); dbDisconnect(ucscDb);
result
hg19 <- dbConnect(MySQL(), user="hg19", host="genome-mysql.cse.ucsc.edu")
allTables <- dbListTables(hg19)
length(allTables)
hg19 <- dbConnect(MySQL(), user="hg19", host="genome-mysql.cse.ucsc.edu")
hg19 <- dbConnect(MySQL(), user="genome", db="hg19", host="genome-mysql.cse.ucsc.edu")
allTables <- dbListTables(hg19)
length(allTables)
allTables[1:5]
dbListFields(hg19,"affyU133Plus2")
dbGetQuery(hg19, "select count(*) from affyU133Plus2")
query <- dbSendQuery(hg19, "select * from affyU133Plus2 where misMatches between 1 and 3")
affyMis <- fetch(query); quantile(affyMis$misMatches)
affymisSmall <- fetch(query, n=10); dbClearResult(query);
dim(affyMisSmall)
query <- dbSendQuery(hg19, "select * from affyU133Plus2 where misMatches between 1 and 3")
affyMis <- fetch(query); quantile(affyMis$misMatches)
affyMisSmall <- fetch(query, n=10); dbClearResult(query);
dim(affyMisSmall)
query <- dbSendQuery(hg19, "select * from affyU133Plus2 where misMatches between 1 and 3")
hg19 <- dbConnect(MySQL(), user="genome", db="hg19", host="genome-mysql.cse.ucsc.edu")
allTables <- dbListTables(hg19)
length(allTables)
allTables[1:5]
dbListFields(hg19,"affyU133Plus2")
dbGetQuery(hg19, "select count(*) from affyU133Plus2")
# Select a specific subset
query <- dbSendQuery(hg19, "select * from affyU133Plus2 where misMatches between 1 and 3")
affyMis <- fetch(query); quantile(affyMis$misMatches)
affyMisSmall <- fetch(query, n=10); dbClearResult(query);
dim(affyMisSmall)
dbDisconnect(hg19)
source("http://bioconductor.org/biocLite.R")
biocLite("rhdf5")
library(rhdf5)
created = h5createFile("example.h5"
created
created = h5createFile("example.h5")
created
con = url("http://scholar.google.com/citations?user=HI-I6C0AAAAJ&hl=en")
htmlCode = readLines(con)
close(con)
htmlCode
library(XML)
url <- "http://scholar.google.com/citations?user=HI-I6C0AAAAJ&hl=en"
html <- htmlTreeParse(url, useInternalNodes = T)
xpathSApply(html, "//title", xmlValue)
xpathSApply(html, "//td[@id='col-citedby']", xmlValue)
install.packages("httr")
library(httr); html2 = GET(url)
content2 = content(html2, as="text")
parsedHtml = htmlParse(content2, astext=TRUE)
xpathSApply(parsedHtml, "//title", xmlValue)
library(XML)
library(httr); html2 = GET(url)
content2 = content(html2, as="text")
parsedHtml = htmlParse(content2, astext=TRUE)
xpathSApply(parsedHtml, "//title", xmlValue)
?parsedHtml
??parsedHtml
?htmlParse
parsedHtml = htmlParse(content2, asText=TRUE)
xpathSApply(parsedHtml, "//title", xmlValue)
pg1 = GET("http://httpbin.org/basic-auth/user/passwd")
pg1
pg2 = GET("http://httpbin.org/basic-auth/user/passwd", authenticate("user", "passwd"))
pg2
names(pg2)
?handle
url <- "http://biostat.jhsph.edu/~jleek/contact.html"
library(httr); html2 = GET(url)
content2 = content(html2, as="text")
?htmlParse
parsedHtml = htmlParse(content2, asText=TRUE)
library(XML)
?htmlParse
parsedHtml = htmlParse(content2, asText=TRUE)
xpathSApply(parsedHtml, "//title", xmlValue)
parsedHtml[1:5]
parsedHtml
class(parsedHtml)
parsedHtml.HTMLInternalDocument
print(parsedHtml)
con = url(url)
htmlCode = readLines(con)
close(con)
htmlCode
htmlCode[1]
nchar(htmlCode[1])
nchar(htmlCode[10])
nchar(htmlCode[20])
nchar(htmlCode[30])
nchar(htmlCode[100])
the_file = "/Users/JerryTsai/userjst/individ/knowledg/cur/jhu.sph/ds03_getdata/quizzes/quiz02/getdata-wksst8110.for"
qqq <- read.fwf(the_file, c(10,3,2), header = FALSE, sep = "\t",
skip = 4)
qqq[1]
qqq <- read.fwf(the_file, c(10,3,2), header = FALSE, sep = " ",
skip = 4)
qqq[1]
qqq <- read.fwf(the_file, widths=c(10,8), header = FALSE, sep = " ", skip = 4)
qqq[1]
the_file <- paste(getwd())
the_file
?setwd
makeVector <- function(x = numeric()) {
m <- NULL
set <- function(y) {
x <<- y
m <<- NULL
}
get <- function() x
setmean <- function(mean) m <<- mean
getmean <- function() m
list(set = set, get = get,
setmean = setmean,
getmean = getmean)
}
cachemean <- function(x, ...) {
m <- x$getmean()
if(!is.null(m)) {
message("getting cached data")
return(m)
}
data <- x$get()
m <- mean(data, ...)
x$setmean(m)
m
}
x <- 1:4
y <- makeVector(x)
cachemean(y)
?matrix
xxx <- matrix()
xxx
inv <- NULL
class(xxx)
class(inv)
class(y)
class(cachemean(y))
y
?mean
?solve
x <- matrix(c(1,0,1,2,4,0,3,5,6), nrow=3, ncol=3)
x
x <- matrix(c(1,0,1,2,4,0,3,5,6), nrow=3, ncol=3)
x <- matrix(c(1,0,1,2,4,0,3,5,6), nrow=3, ncol=3)
x
y <- makeCacheMatrix(x)
makeCacheMatrix <- function(x = matrix()) {
inv <- NULL
set <- function(y) {
x <<- y
inv <<- NULL
}
get <- function() x
setinv <- function(solution) inv <<- solution
getinv <- function() inv
list(set = set, get = get,
setinv = setinv,
getinv = getinv)
}
cacheSolve <- function(x, ...) {
inv <- x$getinv()
if(!is.null(inv)) {
message("getting cached data")
return(inv)
}
mtx <- x$get()
inv <- solve(mtx, ...)
x$setinv(inv)
inv
}
y <- makeCacheMatrix(x)
cacheSolve(y)
y
class(cacheSolve(y))
cacheSolve(y)
y[1]
y[[1]
y[[1]]
y[[1]]
names(y)
library(datasets)
data(iris)
?iris
head(iris)
aggregate(iris$Sepal.Length, by=list(iris$Species), FUN=mean)
aggregate(iris$Sepal.Length, by=list(iris$Species), FUN=mean)[1]
aggregate(iris$Sepal.Length, by=list(iris$Species), FUN=mean)[2]
aggregate(iris$Sepal.Length, by=list(iris$Species), FUN=mean)
rowMeans(iris[,1:4])
apply(iris, 1, mean)
# apply(iris[, 1:4], 1, mean)
apply(iris[, 1:4], 1, mean)
apply(iris[, 1:4], 2, mean)
library(datasets)
data(mtcars)
?mtcars
head(mtcars)
mean(mtcars$mpg, mtcars$cyl)
tapply(mtcars$mpg, mtcars$cyl, mean)
split(mtcars, mtcars$cyl)
lapply(mtcars, mean)
tapply(mtcars$mpg, mtcars$cyl, mean)
means_by_cyl <- tapply(mtcars$mpg, mtcars$cyl, mean)
means_by_cyl$4 - means_by_cyl$8
means_by_cyl$"4" - means_by_cyl$"8"
colnames(mean_by_cyl)
colnames(means_by_cyl)
means_by_cyl
names(means_by_cyl)
class(means_by_cyl
means_by_cyl["4"]
class(means_by_cyl)
means_by_cyl["4"]
means_by_cyl["4"] - means_by_cyl["8"]
debug(ls)
?ls
ls
exit
quit
means_by_cyl <- tapply(mtcars$mpg, mtcars$cyl, mean)
means_by_cyl["4"] - means_by_cyl["8"]
undebug(ls)
undebug(ls)
means_by_cyl <- tapply(mtcars$mpg, mtcars$cyl, mean)
means_by_cyl["4"] - means_by_cyl["8"]
means_by_cyl
head(mtcars)
hp_means_by_cyl <- tapply(mtcars$hp, mtcars$cyl, mean)
hp_means_by_cyl
hp_means_by_cyl["4"] - means_by_cyl["8"]
hp_means_by_cyl <- tapply(mtcars$hp, mtcars$cyl, mean)
hp_means_by_cyl
hp_means_by_cyl["4"] - hp_means_by_cyl["8"]
library(datasets)
data(iris)
?iris
head(iris)
aggregate(iris$Sepal.Length, by=list(iris$Species), FUN=mean)
hp_means_by_cyl <- tapply(mtcars$hp, mtcars$cyl, mean)
hp_means_by_cyl
hp_means_by_cyl["4"] - hp_means_by_cyl["8"]
DT1 <- data.table(x=c(`a', `a', `b', `dt1'), y=1:4)
DT2 <- data.table(x=c('`a', `b', `dt2'), z=5:7)
DT1
DT2
library(data.table)
install.packages("data.table")
library(data.table)
DT1 <- data.table(x=c(`a', `a', `b', `dt1'), y=1:4)
DT2 <- data.table(x=c('`a', `b', `dt2'), z=5:7)
DT1
DT2
DT1 <- data.table(x=c('a', 'a', 'b', 'dt1'), y=1:4)
DT2 <- data.table(x=c('a', 'b', 'dt2'), z=5:7)
DT1
DT2
the_file <- "/Users/JerryTsai/userjst/individ/knowledg/cur/jhu.sph/ds03_getdata/quizzes/quiz01/getdata-data-ss06hid.csv"
q01 <- read.csv(file=the_file,head=TRUE,sep=",")
colnames(q01)
table(quiz01$VAL)
table(q01$VAL)
table(q01$VAL)
library(xlsx)
the_file <- "/Users/JerryTsai/userjst/individ/knowledg/cur/jhu.sph/ds03_getdata/quizzes/quiz01/getdata-data-DATA.gov_NGAP.xlsx"
colIndex <- 7:15
rowIndex <- 18:23
q03 <- read.xlsx(file=the_file, sheetIndex = 1, header=TRUE, colIndex=colIndex, rowIndex=rowIndex)
head(q03)
install.packages("xlsx")
library(xlsx)
the_file <- "/Users/JerryTsai/userjst/individ/knowledg/cur/jhu.sph/ds03_getdata/quizzes/quiz01/getdata-data-DATA.gov_NGAP.xlsx"
colIndex <- 7:15
rowIndex <- 18:23
q03 <- read.xlsx(file=the_file, sheetIndex = 1, header=TRUE, colIndex=colIndex, rowIndex=rowIndex)
head(q03)
colnames(q03)
sum(q03$Zip*q03$Ext,na.rm=T)
library(XML)
the_file <- "/Users/JerryTsai/userjst/individ/knowledg/cur/jhu.sph/ds03_getdata/quizzes/quiz01/getdata-data-restaurants.xml"
quiz03 <-xmlTreeParse(the_file, useInternal=TRUE)
rootNode <-xmlRoot(quiz03)
xmlName(rootNode)
rootNode[[1]]
sum(xpathSApply(rootNode,"//zipcode",xmlValue) == "21231")
the_file <- "/Users/JerryTsai/userjst/individ/knowledg/cur/jhu.sph/ds03_getdata/quizzes/quiz01/getdata-data-ss06pid.csv"
q05 <- read.csv(file=the_file,head=TRUE,sep=",")
install.packages("data.table")
?fread
library(data.table)
?fread
q05 <- fread(file=the_file,head=TRUE,sep=",")
q05 <- fread(the_file)
DT <- q05
DT[, mean(pwgtp15), by=SEX]
set.seed(13435)
X <-data.frame("var1" = sample (1:5), "var2" = sample(6:10), "var3" = sample(11:15)
X <- X[sample(1:5), ]; X$var2[c(1, 3)] = NA
X <-data.frame("var1" = sample (1:5), "var2" = sample(6:10), "var3" = sample(11:15))
X <- X[sample(1:5), ]; X$var2[c(1, 3)] = NA
X
X[, 1]
X[, "var1"]
X[1:2, "var2"]
X[(X$var1 = 3 & X$var3 > 11), ]
X[(X$var1 <= 3 | X$var3 > 15), ]
X[(X$var1 <= 3 & X$var3 > 11), ]
X
X[(X$var1 <= 3 & X$var3 > 11), ]
X[(X$var1 <= 3 | X$var3 > 15), ]
X
X <- X[sample(1:5), ]; X$var2[c(1, 3)] = NA
X
set.seed(13435)
X <-data.frame("var1" =sample (1:5), "var2" = sample(6:10), "var3" = sample(11:15))
X <- X[sample(1:5), ]; X$var2[c(1, 3)] = NA
X
X[(X$var1 <= 3 & X$var3 > 11), ]
X[(X$var1 <= 3 & X$var3 > 11), ]
X[(X$var1 <= 3 | X$var3 > 15), ]
X[which(X$var2 > 8), ]
sort(X$var1)
sort(X$var1, decreasing=TRUE)
sort(X$var2, na.last=TRUE)
X[order(X$var1), ]
X[order(X$var1, X$var3), ]
library(plyr)
arrange(X, var1)
arrange(X, var1)
arrange(X, desc(var1))
X$var4 <- rnorm(5)
X
Y <- cbind(X, rnorm(5))
Y
#
# name: plot1.R
# author: Jerry Tsai
# last updated: 2014-09-07
# For DS04: Exploratory Data Analysis, Project 1
#
#
# Read in data
#
## Could make the subsetting of the power consumption data set by
## using readLines(), making reading the entire text file unnecessary,
## or subsetting on Date, which is a text string, using:
##   consumption$Date %in% c('01/02/2007', '02/02/2007')
## Instead, will convert all Dates into R date values before subsetting
##
## Read-in validated per prior examination
consumption <- read.table("../data/household_power_consumption.txt", sep=";", header=TRUE, na.strings=c("?"))
consumption$RDate <- as.Date(strptime(consumption$Date, "%d/%m/%Y"))
## Create R datetime variable in the analysis data set
anlyDS <- consumption[which(consumption$RDate %in% as.Date(c('2007-02-01', '2007-02-02'))), ]
anlyDS$RDateTime <- strptime(paste(anlyDS$Date, anlyDS$Time), format = "%d/%m/%Y %H:%M:%S")
#
# Generate Plot 1
# Histogram of global active power
#
png(file="plot1.png") # Default width and height are each 480 pixels
hist(anlyDS$Global_active_power, col="red", main="Global Active Power", xlab="Global Active Power (kilowatts)")
dev.off()
getwd()
library(ggplot2)
str(mpg)
qplot(displ, hwy, data=mpg)
qplot(displ, hwy, data=mpg, color=drv)
qplot(displ, hwy, data=mpg, geom=c("point", "smooth"))
qplot(hwy, data=mpg, fill=drv)
qplot(displ, hwy, data=mpg, facets=.~drv)
qplot(displ, hwy, data=mpg, facets=.~drv)
qplot(hwy, data=mpg, facets=drv~., binwidth=2)
testdat <- data.frame(x=1:100, y=rnorm(100))
testdat[50, 2] <- 100  ## Outlier!
plot(testdat$x, testdat$y, type="l", ylim=c(-3,3))
g <- ggplot(testdat, aes(x=x, y=y))
g + geom_line()
g + geom_line() + ylim(-3, 3)
g + geom_line() + coord_cartesian(ylim=c(-3, 3))
cutpoints <- quantile(x, seq(0, 1, length=4), na.rm=TRUE)
x <- rnorm(100)
cutpoints <- quantile(x, seq(0, 1, length=4), na.rm=TRUE)
cutpoints
library(datasets)
q <- xyplot(Ozone ~ Wind, data=airquality)
class(q)
library(datasets)
library(lattice)
qq <- xyplot(Ozone ~ Wind, data=airquality)
class(q)
library(nlme)
library(lattice)
xyplot(weight ~ Time | Diet, BodyWeight)
q01 <- xyplot(weight ~ Time | Diet, BodyWeight)
class(q01)
x <-rnorm(100)
y <-rnorm(100)
q01 <- xyplot(x ~ y)
class(q01)
library(nlme)
library(lattice)
q01 <- xyplot(weight ~ Time | Diet, BodyWeight)
class(q01)
?llines
?text
?axis
?points
library(lattice)
library(datasets)
data(airquality)
p <- xyplot(Ozone ~ Wind | factor(Month), data=airquality)
print(p)
?print.trellis
?par
?trellis.par.set
?splom
qplot(Wind, Ozone, data=airquality, facets=.~factor(Month))
library(datasets)
data(airquality)
qplot(Wind, Ozone, data=airquality, facets=.~factor(Month))
library(ggplot2)
library(datasets)
data(airquality)
qplot(Wind, Ozone, data=airquality, facets=.~factor(Month))
qplot(Wind, Ozone, data=airquality)
airquality = transform(airquality, Month = factor(Month))
qplot(Wind, Ozone, data=airquality, facets=.~Month
)
library(ggplot2)
g <- ggplot(movies, aes(votes, rating))
print(g)
qplot(votes, rating, data = movies)
qplot(votes, rating, data = movies) + geom_smooth()
getwd()
setwd("/Users/JerryTsai/userjst/individ/knowledg/cur/jhu.sph/ds05_reproducible/projects/project01/RepData_PeerAssessment1")
getwd()
library(knitr)
knit2html("PA1_template.Rmd")
browseURL("PA1_template.html")
